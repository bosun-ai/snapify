{% comment %}
Renders filters for statistics

Usage:
{% render 'forsure-charts-filters' %}
{% endcomment %}
<style>
  .glyphicon-ok:before {
    content: "\2713"
  }
  .dropdown {
    margin-left: 0!important;
  }
</style>
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>-->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script
  src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
  integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.css" />
<div id="filters">
  <div class="filter-group" id="countries-filter-guide">
    <div class="filter-group-heading">Countries</div>
    <select
      id="countries"
      class="selectpicker"
      multiple
      data-live-search="true">
      <option>Countries</option>
    </select>
  </div>

  <div class="filter-group" id="date-filter-guide">
    {{ 'daterangepicker.css' | asset_url | stylesheet_tag }}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <div class="filter-group-heading">Dates</div>
    <input
      type="text"
      class="btn dropdown-toggle bs-placeholder btn-default"
      id="monthPicker" />
  </div>
  <div class="filter-group" id="profile-filter-guide">
    <div class="filter-group-heading">Profiles</div>
    <select
      id="profileDropdown"
      class="selectpicker"
      multiple
      data-live-search="true"></select>
  </div>
  <div class="filter-group" style="display: none"> <!-- TODO enable-->
    <div class="filter-group-heading">Reports</div>
    <select
      id="reportsDropdown"
      class="selectpicker"
      multiple
      data-live-search="true"></select>
  </div>

  <div class="filter-group" style="display: none"> <!-- TODO enable -->
    <div class="filter-group-heading">Columns</div>
    <select
      id="columnsDropdown"
      class="selectpicker"
      multiple
      data-live-search="true"></select>
  </div>
  {% comment %} <div style='margin-left: 2rem;cursor: pointer;' onclick="showAllCharts()">
    <h2>+</h2>
  </div> {% endcomment %}
</div>
<script src="{{ 'forsure-charts-filters.js' | asset_url }}"></script>
<script>

  // Event listener for country dropdown change
  document.getElementById('countries').addEventListener('change', updateCountry);

// Event listener for reports dropdown change
  // document.getElementById('reportsDropdown').addEventListener('change', updateReports);

  document.getElementById('profileDropdown').addEventListener('change', updateProfiles);

// Event listener for reports dropdown change
  // document.getElementById('columnsDropdown').addEventListener('change', updateCategories);

// Redraw the charts
  // ["reportsDropdown", "profileDropdown", "countries", "columnsDropdown"].forEach(addChangeEventToDropdown);

  document.addEventListener('DOMContentLoaded', initDropdowns);

</script>